{% for station in results %}
<div>
    <p><b>{{ station.Name }}</b> - {{ station.Address }}</p>
    <button onclick="selectStation({{ station.id }})">Select</button>  <!-- Pass station.id -->
</div>
{% endfor %}


<script>
function selectStation(stationId) {
    console.log("Selected Station ID:", stationId);  // Debug log

    fetch(`/map/station_info/${stationId}`) 
        .then(response => {
            if (!response.ok) {
                throw new Error('Station not found');
            }
            return response.json();
        })
        .then(data => {
            console.log("Station Data1:", data);  // Debug log

            // Check if elements exist
            const stationNameElement = document.getElementById('station-name');
            const stationCompanyElement = document.getElementById('station-company');
            const stationRatingElement = document.getElementById('station-rating');
            const stationIdElement = document.getElementById('station-id');

            if (stationNameElement && stationCompanyElement && stationRatingElement && stationIdElement) {
                // Update the elements
                stationCompanyElement.innerText = "Charging Station Company: " + data.Name;
                stationNameElement.innerText = "Station Address: " + data.Address;  // Fix: Use data.Address
                stationRatingElement.innerText = 'Rating: ' + (data.Rating || 'N/A');
                stationIdElement.value = data.id;
                localStorage.setItem('selectedStationId', data.id);  // Store the selected station ID

                // Scroll to the station info
                document.getElementById('selected-station-info').scrollIntoView({ behavior: 'smooth' });
            } else {
                console.error('One or more elements not found');
            }
        })
        .catch(error => {
            console.error('Error:', error);
            alert('Failed to fetch station information.');
        });
}
</script>

